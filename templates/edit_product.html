{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<a href="{{ url_for('inventory') }}" class="btn-secondary">â† Back to Enventory</a>
<div class="form-card">
    <h2>âœ Edit Product</h2>
    <form id="editProductForm" method="POST" enctype="multipart/form-data">
        
        <label>Product Name</label>
        <input type="text" name="name" value="{{ product.name }}" required>

        <label>Category</label>
        <input type="text" name="category" value="{{ product.category }}" required>

        <label>Price (â‚¹)</label>
        <input type="number" step="0.01" name="price" value="{{ product.price }}" required>

        <label>Quantity</label>
        <input type="number" name="stock" value="{{ product.stock }}" required>


        <label>Current Image</label><br>
        {% if product.image %}
            <img src="{{ url_for('static', filename='uploads/products/' + product.image) }}" class="product-preview">
        {% else %}
            <p style="color: #999;">No image uploaded</p>
        {% endif %}

        <label>Change Image</label>
        <input type="file" name="image" accept="image/*" onchange="previewImage(event)">
        <img id="imagePreview" class="product-preview" style="display:none;">

        <button type="submit" class="btn-primary">ğŸ’¾ Update Product</button>
    </form>
</div>

<script>
function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function(){
        const output = document.getElementById('imagePreview');
        output.src = reader.result;
        output.style.display = 'block';
    };
    reader.readAsDataURL(event.target.files[0]);
}
</script>
{% endblock %}
