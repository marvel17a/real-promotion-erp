{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/employee.css') }}">
<script defer src="{{ url_for('static', filename='js/employee_edit.js') }}"></script>

<section class="page-section">
  <div class="page-header">
    <h2>‚úè Edit Employee</h2>
    <a href="{{ url_for('employees') }}" class="btn-secondary">‚Üê Back</a>
  </div>

  <form class="form-card" method="POST" enctype="multipart/form-data" id="employeeForm">
    <div class="form-grid">
      <div class="form-group">
        <label>Name <span>*</span></label>
        <input type="text" name="name" value="{{ employee.name }}" required>
      </div>

      <div class="form-group">
        <label>Position <span>*</span></label>
        <input type="text" name="position" value="{{ employee.position }}" required>
      </div>

      <div class="form-group">
        <label>Email <span>*</span></label>
        <input type="email" name="email" value="{{ employee.email }}" required>
      </div>

      <div class="form-group">
        <label>Phone <span>*</span></label>
        <input type="tel" name="phone" pattern="[0-9]{10}" value="{{ employee.phone }}" required>
      </div>

      <div class="form-group">
        <label>Status <span>*</span></label>
        <select name="status" required>
          <option value="active" {{ 'selected' if employee.status=='active' }}>Active</option>
          <option value="inactive" {{ 'selected' if employee.status=='inactive' }}>Inactive</option>
        </select>
      </div>

      <div class="form-group">
        <label>City <span>*</span></label>
        <input type="text" name="city" value="{{ employee.city }}" required>
      </div>

      <div class="form-group">
        <label>Current Photo</label>
        {% if employee.image %}
          <img class="avatar lg" src="{{ url_for('static', filename='uploads/employees/' ~ employee.image) }}" alt="{{ employee.name }}">
        {% else %}
          <div class="avatar placeholder">No photo</div>
        {% endif %}
        <label class="mt-8">Change Photo</label>
        <input type="file" name="image" accept="image/*" id="imageInput">
        <div class="preview">
          <img id="imagePreview" alt="" style="display:none;">
        </div>
      </div>

      <div class="form-group">
        <label>Current Document</label>
        {% if employee.document %}
          <p><a href="{{ url_for('static', filename='uploads/documents/' ~ employee.document) }}" target="_blank">View current</a></p>
        {% else %}
          <p>‚Äî</p>
        {% endif %}
        <label class="mt-8">Replace Document (PDF)</label>
        <input type="file" name="document" accept="application/pdf" id="docInput">
        <p class="file-note" id="docName">No file chosen</p>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary">üíæ Update Employee</button>
      <a href="{{ url_for('employees') }}" class="btn-secondary">Cancel</a>
    </div>
  </form>
</section>
{% endblock %}
