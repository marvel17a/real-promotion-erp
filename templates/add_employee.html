{% extends "base.html" %}
{% block content %}
<!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/employee_vivid_theme.css') }}"> -->
<script src="{{ url_for('static', filename='js/employee_add.js') }}"></script>

<div class="container-fluid py-4">
  <div class="page-header-vivid">
    <h2>Add New Employee</h2>
    <a href="{{ url_for('employees') }}" class="btn btn-secondary">
      <i class="bi bi-x-lg"></i> Cancel
    </a>
  </div>

  <form method="POST" enctype="multipart/form-data" id="employeeForm">
    <div class="row g-4">
      <!-- Column 1: Core Info & Contact -->
      <div class="col-lg-8">
        <div class="card form-card-vivid">
          <div class="card-header">
            <h5><i class="bi bi-person-lines-fill me-2"></i>Employee Details</h5>
          </div>
          <div class="card-body p-4">
            <div class="row g-3">
              <div class="col-md-6">
                <label for="name" class="form-label">Name <span>*</span></label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Enter full name" data-unique="name" required>
                <div class="form-error" data-error-for="name"></div>
              </div>
              <div class="col-md-6">
                <label for="position" class="form-label">Position <span>*</span></label>
                <input type="text" class="form-control" id="position" name="position" placeholder="e.g., Sales Executive" required>
                <div class="form-error" data-error-for="position"></div>
              </div>
              <div class="col-md-6">
                <label for="email" class="form-label">Email <span>*</span></label>
                <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com" data-unique="email" required>
                <div class="form-error" data-error-for="email"></div>
              </div>
              <div class="col-md-6">
                <label for="phone" class="form-label">Phone <span>*</span></label>
                <input type="tel" class="form-control" id="phone" name="phone" pattern="[0-9]{10}" placeholder="10-digit number" data-unique="phone" required>
                <div class="form-error" data-error-for="phone"></div>
              </div>
              <div class="col-md-6">
                <label for="city" class="form-label">City <span>*</span></label>
                <input type="text" class="form-control" id="city" name="city" placeholder="e.g., Nadiad" required>
                <div class="form-error" data-error-for="city"></div>
              </div>
              <div class="col-md-6">
                <label for="status" class="form-label">Status <span>*</span></label>
                <select id="status" name="status" class="form-select" required>
                  <option value="active" selected>Active</option>
                  <option value="inactive">Inactive</option>
                </select>
                <div class="form-error" data-error-for="status"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Column 2: Uploads -->
      <div class="col-lg-4">
        <!-- Profile Photo -->
        <div class="card form-card-vivid mb-4">
          <div class="card-header">
            <h5><i class="bi bi-image me-2"></i>Profile Photo</h5>
          </div>
          <div class="card-body p-4 text-center">
            <div class="preview-box mb-3">
              <img id="imagePreview" class="preview-img-circle" alt="Image preview" style="display:none;">
              <span id="imagePlaceholder" class="preview-placeholder">Image preview</span>
            </div>
            <label for="imageInput" class="form-label">Photo (Max 2MB)</label>
            <input type="file" class="form-control" name="image" accept="image/png, image/jpeg" id="imageInput">
            <div class="form-error" data-error-for="image"></div>
          </div>
        </div>
        
        <!-- Document -->
        <div class="card form-card-vivid">
          <div class="card-header">
            <h5><i class="bi bi-file-earmark-pdf-fill me-2"></i>Document</h5>
          </div>
          <div class="card-body p-4">
            <label for="docInput" class="form-label">PDF Document (Max 5MB)</label>
            <input type="file" class="form-control" name="document" accept="application/pdf" id="docInput">
            <div class="form-error" data-error-for="document"></div>
            <p class="text-muted small mt-2" id="docName">No file chosen</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="card form-actions mt-4">
      <div class="d-flex justify-content-end">
        <a href="{{ url_for('employees') }}" class="btn btn-secondary me-2">Cancel</a>
        <button type="submit" class="btn btn-primary px-4">
          <i class="bi bi-check-circle-fill me-2"></i> Save Employee
        </button>
      </div>
    </div>
  </form>
</div>

<!-- Custom JS to make image preview work -->
<script>
  document.getElementById('imageInput').addEventListener('change', function(e) {
    const preview = document.getElementById('imagePreview');
    const placeholder = document.getElementById('imagePlaceholder');
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        preview.src = event.target.result;
        preview.style.display = 'block';
        placeholder.style.display = 'none';
      }
      reader.readAsDataURL(file);
    } else {
      preview.style.display = 'none';
      placeholder.style.display = 'block';
    }
  });
</script>
{% endblock %}
