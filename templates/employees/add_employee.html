{% extends "admin_master.html" %}
{% block page_content %}

<div class="container mt-4">
    <h2 class="fw-bold mb-4">Add Employee</h2>

    <form action="{{ url_for('add_employee') }}" method="POST"
          enctype="multipart/form-data" class="glass-card p-4">

        <!-- BASIC INFO -->
        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">Full Name</label>
                <input type="text" name="name" class="form-control" required>
            </div>

            <div class="col-md-4">
                <label class="form-label">Email</label>
                <input type="email" name="email" class="form-control" required>
            </div>

            <div class="col-md-4">
                <label class="form-label">Phone</label>
                <input type="text" name="phone" maxlength="10"
                       pattern="\d{10}" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">Date of Birth</label>
                <input type="date" name="dob" class="form-control">
            </div>

            <div class="col-md-4">
                <label class="form-label">Join Date</label>
                <!-- maps to join_date; if empty DB default curdate() is used -->
                <input type="date" name="joining_date" class="form-control">
            </div>

            <div class="col-md-4">
                <label class="form-label">Status</label>
                <select name="status" class="form-control" required>
                    <option value="active" selected>Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>
        </div>

        <!-- EXTRA HR INFO -->
        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">Emergency Contact</label>
                <input type="text" name="emergency_contact"
                       maxlength="10" pattern="\d{10}"
                       class="form-control">
            </div>

            <div class="col-md-4">
                <label class="form-label">Aadhar Number</label>
                <input type="text" name="aadhar_no"
                       maxlength="12" class="form-control">
            </div>

            <div class="col-md-4">
                <label class="form-label">Alternative Joining Date</label>
                <!-- maps to joining_date (optional) -->
                <input type="date" name="joining_date" class="form-control">
            </div>
        </div>

        <!-- PINCODE / ADDRESS -->
        <div class="row mb-3">
            <div class="col-md-3">
                <label class="form-label">Pincode</label>
                <input type="text" id="pincode" name="pincode"
                       maxlength="6" pattern="\d{6}"
                       class="form-control">
            </div>

            <div class="col-md-3">
                <label class="form-label">City / Area</label>
                <select id="city" name="city" class="form-control">
                    <option value="">Select City/Area</option>
                </select>
            </div>

            <div class="col-md-3">
                <label class="form-label">District</label>
                <input type="text" id="district" name="district"
                       class="form-control" readonly>
            </div>

            <div class="col-md-3">
                <label class="form-label">State</label>
                <input type="text" id="state" name="state"
                       class="form-control" readonly>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Address Line 1</label>
                <input type="text" name="address_line1" class="form-control">
            </div>

            <div class="col-md-6">
                <label class="form-label">Address Line 2</label>
                <input type="text" name="address_line2" class="form-control">
            </div>
        </div>

        <!-- DEPARTMENT & POSITION (FKs) -->
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Department</label>
                <select name="department_id" class="form-control">
                    <option value="">Select Department</option>
                    {% for d in departments %}
                    <option value="{{ d.id }}">{{ d.department_name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">Position</label>
                <select name="position_id" class="form-control">
                    <option value="">Select Position</option>
                    {% for p in positions %}
                    <option value="{{ p.id }}">{{ p.position_name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <!-- FILES -->
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Employee Photo</label>
                <input type="file" name="image" class="form-control">
            </div>

            <div class="col-md-6">
                <label class="form-label">Document (ID Proof, etc.)</label>
                <input type="file" name="document" class="form-control">
            </div>
        </div>

        <button class="btn btn-primary mt-3">Save Employee</button>
    </form>
</div>

<!-- client-side pincode script -->
<script src="{{ url_for('static', filename='js/pin.js') }}"></script>

{% endblock %}
