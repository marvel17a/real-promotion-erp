{% extends "admin_master.html" %}

{% block page_content %}
<style>
    /* Glassmorphism Card */
    .glass-card {
        backdrop-filter: blur(12px);
        background: rgba(255, 255, 255, 0.25);
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .form-control {
        border-radius: 10px;
        height: 48px;
        font-size: 15px;
    }

    .form-label {
        font-weight: 600;
        color: #1a1a1a;
    }

    .section-title {
        font-size: 20px;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 15px;
    }

    .btn-primary {
        width: 180px;
        height: 48px;
        border-radius: 10px;
        font-weight: 600;
    }
</style>

<div class="container mt-4">
    <h2 class="fw-bold mb-4">Add New Employee</h2>

    <div class="glass-card">
        <form action="{{ url_for('add_employee') }}" method="POST" enctype="multipart/form-data">

            <!-- Personal Info -->
            <div class="section-title">Personal Details</div>

            <div class="row mb-3">
                <div class="col-md-4">
                    <label class="form-label">Full Name</label>
                    <input type="text" name="name" class="form-control" required>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Email</label>
                    <input type="email" name="email" class="form-control" id="email" required>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Mobile</label>
                    <input type="text" name="mobile" id="mobile" maxlength="10" class="form-control" required>
                </div>
            </div>

            <!-- DOB -->
            <div class="row mb-3">
                <div class="col-md-4">
                    <label class="form-label">Date of Birth</label>
                    <input type="date" name="dob" class="form-control" required>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Gender</label>
                    <select name="gender" class="form-control" required>
                        <option value="">Select Gender</option>
                        <option>Male</option>
                        <option>Female</option>
                        <option>Other</option>
                    </select>
                </div>
            </div>

            <!-- Address Section -->
            <div class="section-title mt-4">Address Details</div>

            <div class="row mb-3">
                <div class="col-md-3">
                    <label class="form-label">Pincode</label>
                    <input type="text" id="pincode" name="pincode" maxlength="6"
                           class="form-control" required>
                </div>

                <div class="col-md-3">
                    <label class="form-label">City</label>
                    <input type="text" id="city" name="city" class="form-control" readonly required>
                </div>

                <div class="col-md-3">
                    <label class="form-label">District</label>
                    <input type="text" id="district" name="district" class="form-control" readonly required>
                </div>

                <div class="col-md-3">
                    <label class="form-label">State</label>
                    <input type="text" id="state" name="state" class="form-control" readonly required>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">Address Line 1</label>
                    <input type="text" name="address1" class="form-control" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Address Line 2</label>
                    <input type="text" name="address2" class="form-control">
                </div>
            </div>

            <!-- Job Info -->
            <div class="section-title mt-4">Job Details</div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">Department</label>
                    <select name="department_id" class="form-control" required>
                        <option value="">Select Department</option>
                        {% for d in departments %}
                        <option value="{{ d.id }}">{{ d.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Position</label>
                    <select name="position_id" class="form-control" required>
                        <option value="">Select Position</option>
                        {% for p in positions %}
                        <option value="{{ p.id }}">{{ p.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- Photo -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">Employee Photo</label>
                    <input type="file" name="photo" accept="image/*" class="form-control">
                </div>
            </div>

            <div class="mt-4">
                <button class="btn btn-primary">Save Employee</button>
            </div>

        </form>
    </div>
</div>

<script src="/static/js/pincode.js"></script>

<script>
    // MOBILE VALIDATION (10 digits only)
    document.getElementById("mobile").addEventListener("input", function () {
        this.value = this.value.replace(/\D/g, "").slice(0, 10);
    });
</script>

{% endblock %}
