{% extends "admin_master.html" %}
{% block page_content %}

<div class="container mt-4">
    <h2 class="fw-bold mb-4">Add Employee</h2>

    <form action="{{ url_for('add_employee') }}" method="POST"
          enctype="multipart/form-data" class="glass-card p-4">

        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Full Name</label>
                <input type="text" name="name" class="form-control" required>
            </div>

            <div class="col-md-6">
                <label class="form-label">Email</label>
                <input type="email" name="email" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">Phone</label>
                <input type="text" name="phone" maxlength="10"
                       pattern="\d{10}" class="form-control" required>
            </div>

            <div class="col-md-4">
                <label class="form-label">Date of Birth</label>
                <input type="date" name="dob" class="form-control" required>
            </div>

            <div class="col-md-4">
                <label class="form-label">Joining Date</label>
                <input type="date" name="joining_date" class="form-control" required>
            </div>
        </div>

        <!-- EMERGENCY CONTACT -->
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Emergency Contact</label>
                <input type="text" name="emergency_contact"
                       maxlength="10" pattern="\d{10}"
                       class="form-control" required>
            </div>

            <div class="col-md-6">
                <label class="form-label">Status</label>
                <select name="status" class="form-control" required>
                    <option value="">Select</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>
        </div>

        <!-- PINCODE AUTOFILL -->
        <div class="row mb-3">
            <div class="col-md-3">
                <label class="form-label">Pincode</label>
                <input type="text" id="pincode"
                       name="pincode" maxlength="6"
                       pattern="\d{6}" class="form-control" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">City / Area</label>
                <select name="city" id="city" class="form-control" required>
                    <option value="">Select City/Area</option>
                </select>
            </div>

            <div class="col-md-3">
                <label class="form-label">District</label>
                <input type="text" name="district" id="district"
                       class="form-control" readonly required>
            </div>

            <div class="col-md-3">
                <label class="form-label">State</label>
                <input type="text" name="state" id="state"
                       class="form-control" readonly required>
            </div>
        </div>

        <!-- ADDRESS -->
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Address Line 1</label>
                <input type="text" name="address_line1"
                       class="form-control" required>
            </div>

            <div class="col-md-6">
                <label class="form-label">Address Line 2</label>
                <input type="text" name="address_line2"
                       class="form-control">
            </div>
        </div>

        <!-- DEPARTMENT + POSITIONS -->
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Department</label>
                <select name="department_id" class="form-control" required>
                    <option value="">Select Department</option>
                    {% for d in departments %}
                    <option value="{{ d.id }}">{{ d.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">Position</label>
                <select name="position_id" class="form-control" required>
                    <option value="">Select Position</option>
                    {% for p in positions %}
                    <option value="{{ p.id }}">{{ p.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <!-- IMAGE + DOCUMENT -->
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">Employee Photo</label>
                <input type="file" name="image" class="form-control">
            </div>

            <div class="col-md-6">
                <label class="form-label">Document File</label>
                <input type="file" name="document" class="form-control">
            </div>
        </div>

        <button class="btn btn-primary mt-3">Save Employee</button>
    </form>
</div>

<script src="/static/js/pincode.js"></script>

{% endblock %}
