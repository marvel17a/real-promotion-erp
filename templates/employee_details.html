{% extends "base.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/employee.css') }}">
<style>
  /* Page-specific style for the header */
  .detail-header-bg {
    height: 150px;
    background: var(--premium-bg);
    border-radius: var(--premium-radius) var(--premium-radius) 0 0;
  }
</style>

<div class="container-fluid py-4">

  <!-- Page Header with Back Button -->
  <div class="page-header">
    <h2>Employee Profile</h2>
    <a href="{{ url_for('employees') }}" class="btn btn-secondary">
      <i class="bi bi-arrow-left me-1"></i> Back to Directory
    </a>
  </div>

  <!-- Main Detail Card -->
  <div class="card detail-card">
    <!-- Header background (for avatar overlap) -->
    <div class="detail-header-bg"></div>

    <!-- Avatar & Title Section -->
    <div class="card-body text-center p-4 detail-header">
      {% if employee.image %}
        <img class="detail-avatar"
             src="{{ cloudinary_url(employee.image, height=150, width=150, crop='fill', gravity='face') }}"
             alt="{{ employee.name }}">
      {% else %}
        <div class="detail-avatar placeholder">{{ employee.name[0]|upper }}</div>
      {% endif %}

      <h3 class="mt-3 mb-1 detail-title">{{ employee.name }}</h3>
      <p class="detail-position">{{ employee.position }}</p>
      
      {% if employee.status == 'active' %}
        <span class="badge text-bg-success rounded-pill px-3 py-2">Active</span>
      {% else %}
        <span class="badge text-bg-warning rounded-pill px-3 py-2">Inactive</span>
      {% endif %}
    </div>

    <!-- Info Grid Section -->
    <div class="card-body p-4 p-md-5">
      <div class="detail-info-grid">
        
        <!-- Contact Info -->
        <div class="detail-info-item">
          <i class="bi bi-envelope-fill me-3"></i>
          <div>
            <div class="info-label">Email Address</div>
            <div class="info-value">{{ employee.email }}</div>
          </div>
        </div>
        
        <div class="detail-info-item">
          <i class="bi bi-telephone-fill me-3"></i>
          <div>
            <div class="info-label">Phone Number</div>
            <div class="info-value">{{ employee.phone }}</div>
          </div>
        </div>

        <!-- Location Info -->
        <div class="detail-info-item">
          <i class="bi bi-geo-alt-fill me-3"></i>
          <div>
            <div class="info-label">City</div>
            <div class="info-value">{{ employee.city }}</div>
          </div>
        </div>
        
        <!-- Job Info -->
        <div class="detail-info-item">
          <i class="bi bi-calendar-check-fill me-3"></i>
          <div>
            <div class="info-label">Date Joined</div>
            <div class="info-value">{{ employee.join_date.strftime('%B %d, %Y') if employee.join_date else 'N/A' }}</div>
          </div>
        </div>

        <!-- Document Link -->
        <div class="detail-info-item">
          <i class="bi bi-file-earmark-text-fill me-3"></i>
          <div>
            <div class="info-label">Document</div>
            {% if employee.document %}
              <a href="{{ cloudinary_url(employee.document)[0] }}" target="_blank" class="btn btn-sm btn-outline-primary">
                <i class="bi bi-download me-1"></i> View Document
              </a>
            {% else %}
              <div class="info-value text-muted">No document on file</div>
            {% endif %}
          </div>
        </div>

      </div>
    </div>

    <!-- Card Footer Actions -->
    <div class="form-actions text-center">
      <a href="{{ url_for('emp_ledger', employee_id=employee.id) }}" class="btn btn-secondary">
        <i class="bi bi-journal-text me-1"></i> View Ledger
      </a>
      <a href="{{ url_for('edit_employee', id=employee.id) }}" class="btn btn-primary">
        <i class="bi bi-pencil-fill me-1"></i> Edit Employee
      </a>
    </div>
  </div>
</div>
{% endblock %}
