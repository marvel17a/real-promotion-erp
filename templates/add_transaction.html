{% extends 'admin_master.html' %}

{% block title %}Add Transaction{% endblock %}

{% block page_content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/employee.css') }}">

<div class="container fade-in-up py-4" style="max-width: 800px;">
    
    <!-- HEADER -->
    <div class="mb-4 d-flex align-items-center">
        <a href="{{ url_for('emp_ledger', employee_id=employee.id) }}" class="btn btn-light rounded-circle shadow-sm me-3" style="width: 40px; height: 40px;">
            <i class="fa-solid fa-arrow-left"></i>
        </a>
        <h3 class="fw-bold mb-0">New Transaction</h3>
    </div>

    <div class="glass-panel p-5">
        <h5 class="text-muted fw-bold mb-4">Record for: <span class="text-dark">{{ employee.name }}</span></h5>

        <form method="POST" action="{{ url_for('add_transaction', employee_id=employee.id) }}">
            
            <!-- Type Selection (Big Cards) -->
            <label class="form-label fw-bold mb-3">Transaction Type</label>
            <div class="row g-3 mb-4">
                <div class="col-6">
                    <input type="radio" class="btn-check" name="type" id="credit-option" value="credit" autocomplete="off" required>
                    <label class="btn btn-outline-success w-100 p-4 border-2 rounded-4 h-100 d-flex flex-column align-items-center justify-content-center gap-2" for="credit-option">
                        <i class="fa-solid fa-circle-arrow-down fa-2x"></i>
                        <span class="fw-bold fs-5">Credit</span>
                        <small class="opacity-75">Incoming / Add</small>
                    </label>
                </div>
                <div class="col-6">
                    <input type="radio" class="btn-check" name="type" id="debit-option" value="debit" autocomplete="off">
                    <label class="btn btn-outline-danger w-100 p-4 border-2 rounded-4 h-100 d-flex flex-column align-items-center justify-content-center gap-2" for="debit-option">
                        <i class="fa-solid fa-circle-arrow-up fa-2x"></i>
                        <span class="fw-bold fs-5">Debit</span>
                        <small class="opacity-75">Outgoing / Deduct</small>
                    </label>
                </div>
            </div>

            <!-- Inputs -->
            <div class="row g-4">
                <div class="col-md-6">
                    <label class="form-label fw-bold small text-uppercase text-muted">Amount (â‚¹)</label>
                    <input type="number" step="0.01" class="form-control input-glass fs-5 fw-bold" name="amount" placeholder="0.00" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold small text-uppercase text-muted">Date</label>
                    <input type="date" class="form-control input-glass" name="date" id="datePicker" required>
                </div>
                <div class="col-12">
                    <label class="form-label fw-bold small text-uppercase text-muted">Description</label>
                    <textarea class="form-control input-glass" name="description" rows="3" placeholder="e.g. Salary Advance, Petrol Allowance..."></textarea>
                </div>
            </div>

            <div class="mt-5">
                <button type="submit" class="btn btn-dark w-100 py-3 rounded-pill fw-bold shadow-lg">
                    <i class="fa-solid fa-check me-2"></i> Save Transaction
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    // Auto-fill today's date
    document.addEventListener("DOMContentLoaded", function() {
        const dateInput = document.getElementById("datePicker");
        if (!dateInput.value) {
            const today = new Date().toISOString().split("T")[0];
            dateInput.value = today;
        }
    });
</script>
{% endblock %}
